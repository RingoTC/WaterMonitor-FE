(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{2064:function(e,a,s){Promise.resolve().then(s.bind(s,2899))},2899:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return SingUp}});var n=s(7437);s(8505);var l=s(2265);s(3198),s(7681);var t=s(4033);s(2601).env.NEXT_PUBLIC_BACKEND;var r=s(1396),i=s.n(r),o=s(2173),c=s(6742),d=s(2601);function SingUp(){let e=(0,t.useRouter)(),[a,s]=(0,l.useState)(""),[r,u]=(0,l.useState)({username:"",password:"",firstName:"",lastName:"",email:"",role:"REPORTER",company:"n/a.",cellphone:"",city:"",country:"",like:{}}),[m,h]=(0,l.useState)([]),signup=async a=>{let n="".concat(d.env.NEXT_PUBLIC_BACKEND,"/auth");a.preventDefault();try{let a=await o.Z.post("".concat(n,"/register"),r),s=a.data;h([s,...m]),e.push("/home")}catch(e){console.error(e),e.response&&e.response.data&&e.response.data.message?s(e.response.data.message):e.request?s("Error registering user"):s("Error setting up the request")}};return(0,n.jsx)("div",{className:"home p-0",children:(0,n.jsx)("div",{className:"signup-container-fluid",children:(0,n.jsxs)("div",{className:"signup-container-inside",children:[(0,n.jsx)("h3",{className:"signup-title",children:"Sign Up for WaterMonitor"}),(0,n.jsx)("hr",{}),a&&(0,n.jsx)(c.Z,{variant:"danger",children:a}),(0,n.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:signup,noValidate:!0,children:[(0,n.jsxs)("div",{className:"col-md-4",children:[(0,n.jsx)("label",{htmlFor:"validationCustom01",className:"form-label",children:"Username"}),(0,n.jsx)("input",{className:"form-control mb-3",value:r.username,onChange:e=>u({...r,username:e.target.value}),type:"text",id:"validationCustom01",required:!0}),(0,n.jsx)("div",{className:"valid-feedback",children:"Looks good!"})]}),(0,n.jsxs)("div",{className:"col-md-4",children:[(0,n.jsx)("label",{htmlFor:"validationCustom02",className:"form-label",children:"First name"}),(0,n.jsx)("input",{value:r.firstName,onChange:e=>u({...r,firstName:e.target.value}),type:"text",className:"form-control",id:"validationCustom02",required:!0}),(0,n.jsx)("div",{className:"valid-feedback",children:"Looks good!"})]}),(0,n.jsxs)("div",{className:"col-md-4",children:[(0,n.jsx)("label",{htmlFor:"validationCustomUsername",className:"form-label",children:"Last Name"}),(0,n.jsxs)("div",{className:"input-group has-validation",children:[(0,n.jsx)("input",{value:r.lastName,onChange:e=>u({...r,lastName:e.target.value}),type:"text",className:"form-control",id:"validationCustomUsername","aria-describedby":"inputGroupPrepend",required:!0}),(0,n.jsx)("div",{className:"invalid-feedback",children:"Please choose a username."})]})]}),(0,n.jsx)("div",{className:"col-md mb-3",children:(0,n.jsxs)("div",{className:"form-floating",children:[(0,n.jsx)("input",{value:r.email,onChange:e=>u({...r,email:e.target.value}),type:"email",className:"form-control",id:"floatingInputGrid",placeholder:"name@example.com",required:!0}),(0,n.jsx)("label",{htmlFor:"floatingInputGrid",children:"Email address"})]})}),(0,n.jsx)("br",{}),(0,n.jsx)("div",{className:"col-md mb-3",children:(0,n.jsxs)("div",{className:"form-floating",children:[(0,n.jsxs)("select",{value:r.role,onChange:e=>u({...r,role:e.target.value}),className:"form-select",id:"floatingSelect","aria-label":"Floating label select example",children:[(0,n.jsx)("option",{value:"REPORTER",selected:!0,children:"Reporter"}),(0,n.jsx)("option",{value:"ADMIN",children:"User Administrator"}),(0,n.jsx)("option",{value:"MANAGER",children:"Manager"})]}),(0,n.jsx)("label",{htmlFor:"floatingSelect",children:"Account Type"})]})}),(0,n.jsxs)("div",{className:"row mb-3",children:[(0,n.jsx)("label",{htmlFor:"inputEmail3",className:"col-sm-2 col-form-label",children:"Company: "}),(0,n.jsx)("div",{className:"col-sm-10",children:(0,n.jsx)("input",{type:"text",className:"form-control",id:"inputEmail3",value:r.company,onChange:e=>u({...r,company:e.target.value}),required:!0})})]}),(0,n.jsxs)("div",{className:"row ",children:[(0,n.jsx)("label",{htmlFor:"inputPassword3",className:"col-sm-2 col-form-label",value:r.cellphone,onChange:e=>u({...r,cellphone:e.target.value}),children:"Cell Phone"}),(0,n.jsx)("div",{className:"col-sm-10",children:(0,n.jsx)("input",{type:"text",className:"form-control",id:"inputPassword3"})})]}),(0,n.jsxs)("div",{className:"row g-3",children:[(0,n.jsx)("div",{className:"col-sm-7",children:(0,n.jsx)("input",{type:"text",className:"form-control",placeholder:"City","aria-label":"City",value:r.city,onChange:e=>u({...r,city:e.target.value})})}),(0,n.jsx)("div",{className:"col-sm",children:(0,n.jsx)("input",{type:"text",className:"form-control",placeholder:"Country","aria-label":"Country",value:r.country,onChange:e=>u({...r,country:e.target.value})})})]}),(0,n.jsxs)("div",{className:"col-12 align-items-center",children:[(0,n.jsx)("div",{className:"col-auto",children:(0,n.jsx)("label",{htmlFor:"inputPassword6",className:"col-form-label",children:"Password"})}),(0,n.jsx)("div",{className:"col-auto",children:(0,n.jsx)("input",{className:"form-control",value:r.password,onChange:e=>u({...r,password:e.target.value}),type:"password",id:"inputPassword6","aria-describedby":"passwordHelpInline"})}),(0,n.jsx)("div",{className:"col-auto",children:(0,n.jsx)("span",{id:"passwordHelpInline",className:"form-text",children:"Must be 8-20 characters long."})})]}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsxs)("div",{className:"form-check",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"invalidCheck",required:!0}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"invalidCheck",children:"Agree to terms and conditions"}),(0,n.jsx)("div",{className:"invalid-feedback",children:"You must agree before submitting."})]})}),(0,n.jsxs)("div",{className:"col-12 button-container",children:[(0,n.jsx)("button",{className:"btn btn-primary signup-submission-button-submit",type:"submit",onClick:signup,children:"Submit form"}),(0,n.jsx)("button",{className:"btn btn-danger signup-submission-button-cancel",type:"cancel",children:(0,n.jsx)(i(),{href:"login",children:"Cancel"})})]})]})]})})})}},7681:function(e,a,s){"use strict";s.d(a,{TX:function(){return logoutUser},ZP:function(){return auth},pH:function(){return loginUser}});var n=s(2173),l=s(2601);let t=l.env.NEXT_PUBLIC_BACKEND,r="LOGIN_REQUEST",i="LOGIN_SUCCESS",o="LOGIN_FAILURE",requestLogin=()=>({type:r}),receiveLogin=e=>({type:i,user:e}),loginError=e=>({type:o,message:e});function auth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isAuthenticated:!1,user:null,errorMessage:""},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case r:return{...e,isFetching:!0,isAuthenticated:!1,user:null,errorMessage:""};case i:return{...e,isFetching:!1,isAuthenticated:!0,user:a.user,errorMessage:""};case o:return{...e,isFetching:!1,isAuthenticated:!1,user:null,errorMessage:a.message};case"LOGOUT_SUCCESS":return{...e,isAuthenticated:!1,user:null};default:return e}}let loginUser=(e,a)=>s=>(s(requestLogin()),n.Z.post("".concat(t,"/auth/login"),{username:e,password:a},{withCredentials:!0}).then(e=>{s(receiveLogin(e.data.user))}).catch(e=>{let a=e.response?e.response.data.message:e.message;s(loginError(a))})),logoutUser=()=>e=>n.Z.get("".concat(t,"/auth/logout"),{},{withCredentials:!0}).then(()=>{e({type:"LOGOUT_SUCCESS"})}).catch(e=>{console.error("Logout error:",e)})},8505:function(){},4033:function(e,a,s){e.exports=s(290)},6742:function(e,a,s){"use strict";s.d(a,{Z:function(){return w}});var n=s(4440),l=s.n(n),t=s(2265),r=s(4061),i=s(5113),o=s(7127),c=s(7437);let d=t.forwardRef((e,a)=>(0,c.jsx)("div",{...e,ref:a,className:l()(e.className,"h4")}));d.displayName="DivStyledAsH4";let u=t.forwardRef(({className:e,bsPrefix:a,as:s=d,...n},t)=>(a=(0,o.vE)(a,"alert-heading"),(0,c.jsx)(s,{ref:t,className:l()(e,a),...n})));u.displayName="AlertHeading";var m=s(5511);let h=t.forwardRef(({className:e,bsPrefix:a,as:s=m.Z,...n},t)=>(a=(0,o.vE)(a,"alert-link"),(0,c.jsx)(s,{ref:t,className:l()(e,a),...n})));h.displayName="AlertLink";var p=s(5778),f=s(3290),v=s(8335),g=s(8984);let N={[p.ENTERING]:"show",[p.ENTERED]:"show"},x=t.forwardRef(({className:e,children:a,transitionClasses:s={},onEnter:n,...r},i)=>{let o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},d=(0,t.useCallback)((e,a)=>{(0,v.Z)(e),null==n||n(e,a)},[n]);return(0,c.jsx)(g.Z,{ref:i,addEndListener:f.Z,...o,onEnter:d,childRef:a.ref,children:(n,r)=>t.cloneElement(a,{...r,className:l()("fade",e,a.props.className,N[n],s[n])})})});x.displayName="Fade";var b=s(4275),j=s.n(b);let C={"aria-label":j().string,onClick:j().func,variant:j().oneOf(["white"])},E=t.forwardRef(({className:e,variant:a,"aria-label":s="Close",...n},t)=>(0,c.jsx)("button",{ref:t,type:"button",className:l()("btn-close",a&&`btn-close-${a}`,e),"aria-label":s,...n}));E.displayName="CloseButton",E.propTypes=C;let y=t.forwardRef((e,a)=>{let{bsPrefix:s,show:n=!0,closeLabel:t="Close alert",closeVariant:d,className:u,children:m,variant:h="primary",onClose:p,dismissible:f,transition:v=x,...g}=(0,r.useUncontrolled)(e,{show:"onClose"}),N=(0,o.vE)(s,"alert"),b=(0,i.Z)(e=>{p&&p(!1,e)}),j=!0===v?x:v,C=(0,c.jsxs)("div",{role:"alert",...j?void 0:g,ref:a,className:l()(u,N,h&&`${N}-${h}`,f&&`${N}-dismissible`),children:[f&&(0,c.jsx)(E,{onClick:b,"aria-label":t,variant:d}),m]});return j?(0,c.jsx)(j,{unmountOnExit:!0,...g,ref:void 0,in:n,children:C}):n?C:null});y.displayName="Alert";var w=Object.assign(y,{Link:h,Heading:u})},8984:function(e,a,s){"use strict";s.d(a,{Z:function(){return c}});var n=s(2265),l=s(5778),t=s(1271),r=s(4887),i=s(7437);let o=n.forwardRef(({onEnter:e,onEntering:a,onEntered:s,onExit:o,onExiting:c,onExited:d,addEndListener:u,children:m,childRef:h,...p},f)=>{let v=(0,n.useRef)(null),g=(0,t.Z)(v,h),attachRef=e=>{g(e&&"setState"in e?r.findDOMNode(e):null!=e?e:null)},normalize=e=>a=>{e&&v.current&&e(v.current,a)},N=(0,n.useCallback)(normalize(e),[e]),x=(0,n.useCallback)(normalize(a),[a]),b=(0,n.useCallback)(normalize(s),[s]),j=(0,n.useCallback)(normalize(o),[o]),C=(0,n.useCallback)(normalize(c),[c]),E=(0,n.useCallback)(normalize(d),[d]),y=(0,n.useCallback)(normalize(u),[u]);return(0,i.jsx)(l.default,{ref:f,...p,onEnter:N,onEntered:b,onEntering:x,onExit:j,onExited:E,onExiting:C,addEndListener:y,nodeRef:v,children:"function"==typeof m?(e,a)=>m(e,{...a,ref:attachRef}):n.cloneElement(m,{ref:attachRef})})});var c=o},3290:function(e,a,s){"use strict";s.d(a,{Z:function(){return transitionEndListener}});var n=s(8413),l=s(9469);function parseDuration(e,a){let s=(0,n.default)(e,a)||"",l=-1===s.indexOf("ms")?1e3:1;return parseFloat(s)*l}function transitionEndListener(e,a){let s=parseDuration(e,"transitionDuration"),n=parseDuration(e,"transitionDelay"),t=(0,l.default)(e,s=>{s.target===e&&(t(),a(s))},s+n)}},8335:function(e,a,s){"use strict";function triggerBrowserReflow(e){e.offsetHeight}s.d(a,{Z:function(){return triggerBrowserReflow}})}},function(e){e.O(0,[126,198,396,680,971,864,744],function(){return e(e.s=2064)}),_N_E=e.O()}]);