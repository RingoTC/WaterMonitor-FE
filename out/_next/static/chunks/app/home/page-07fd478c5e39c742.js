(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{9330:function(e,t,r){Promise.resolve().then(r.t.bind(r,2452,23)),Promise.resolve().then(r.t.bind(r,9427,23)),Promise.resolve().then(r.t.bind(r,8628,23)),Promise.resolve().then(r.t.bind(r,4738,23)),Promise.resolve().then(r.t.bind(r,3161,23)),Promise.resolve().then(r.t.bind(r,4295,23)),Promise.resolve().then(r.t.bind(r,8606,23)),Promise.resolve().then(r.t.bind(r,2350,23)),Promise.resolve().then(r.t.bind(r,1194,23)),Promise.resolve().then(r.t.bind(r,4143,23)),Promise.resolve().then(r.bind(r,9093)),Promise.resolve().then(r.bind(r,6540)),Promise.resolve().then(r.t.bind(r,1773,23))},9093:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Maps}});var s=r(7437),n=r(2265),i=r(3198),a=r(8263),c=r(649),o=r(2173),l=r(3903);r(3865);var d=r(1396),h=r.n(d),u=r(6742),p=r(9639),x=r(6716),m=r(1387);let f="http://localhost:9000";var marker_with_inwindow=e=>{var t;let{initialPosition:r,Description:d,monitorID:g}=e,[j,v]=(0,n.useState)(!1),[y,M]=(0,c.Rt)(),w=(0,i.I0)(),S=(0,i.v9)(e=>e.records.records.find(e=>e.MonitoringLocationIdentifier===g)),[_,b]=(0,n.useState)("We are asking openai for more information..."),[F,C]=(0,n.useState)(!1),[D,E]=(0,n.useState)(S?S.pH_Value:""),[P,N]=(0,n.useState)(S?S.DO_Value:""),[Z,I]=(0,n.useState)(S?S.NH4N_Value:""),[k,R]=(0,n.useState)(S?S.COD_Value:""),[H,O]=(0,n.useState)(S?S._id:"0");(0,n.useEffect)(()=>{w((0,l.c)())},[w]);let A=(0,i.v9)(e=>e.auth.user),fetchDescription=async e=>{let t=await fetch("".concat(f,"/openai/").concat(e)),r=await t.json();return b(r.data),C(!0),r.data},handleDelete=async()=>{try{let e=await o.Z.delete("".concat(f,"/site/delete"),{data:{MonitoringLocationIdentifier:g}});w((0,a.iT)()),v(!1),console.log("Site deleted successfully:",e.data)}catch(e){alert("Error deleting site:",e.message)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c._Q,{ref:y,onClick:()=>{v(!0),fetchDescription(d).then(e=>console.log(e))},position:r,children:(0,s.jsx)(c.lO,{background:S?(t=S.pH_Value)>=6.5&&t<=7.5?"#00FF00":t>=7.5&&t<8?"#FFFF00":t>=8?"#FF0000":void 0:"#000",glyphColor:"#000",borderColor:"#000",scale:.8})}),j&&(0,s.jsx)(c.nx,{anchor:M,onCloseClick:()=>{v(!1)},children:(0,s.jsxs)("div",{className:"text-start",style:{width:"300px"},children:[(0,s.jsx)("p",{children:d}),S?(0,s.jsx)(m.Z,{striped:!0,bordered:!0,hover:!0,style:{lineHeight:"16px",fontSize:"14px"},children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"pH:"})}),(0,s.jsx)("td",{children:S.pH_Value})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"DO:"})}),(0,s.jsx)("td",{children:S.DO_Value})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"NH4N:"})}),(0,s.jsx)("td",{children:S.NH4N_Value})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"COD:"})}),(0,s.jsx)("td",{children:S.COD_Value})]})]})}):(0,s.jsx)(p.Z,{animation:"border",role:"status",children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})}),F?(0,s.jsx)(u.Z,{style:{margin:"10px",fontSize:"16px"},variant:"info",children:(0,s.jsx)("p",{children:_})}):(0,s.jsx)(u.Z,{style:{margin:"10px",fontSize:"16px"},variant:"success",children:(0,s.jsx)("p",{children:_})}),(0,s.jsxs)("div",{className:"action",children:[(0,s.jsx)(x.Z,{variant:"primary",children:(0,s.jsx)(h(),{href:"/tickets",style:{color:"#fff",textDecoration:"none"},children:"Submit a Ticket"})}),A&&"ADMIN"===A.role&&(0,s.jsx)(x.Z,{variant:"danger",onClick:handleDelete,children:"Delete"})]})]})})]})};function Maps(){let e=(0,i.I0)(),t=(0,i.v9)(e=>e.maps);return(0,n.useEffect)(()=>{e((0,a.w6)())},[e]),(0,s.jsx)("div",{className:"maps",style:{height:"100%",width:"100%"},children:(0,s.jsx)(c.un,{apiKey:"AIzaSyCyZWsP89KU5H3hNnWF2s53HFJYAlOZ41o",children:(0,s.jsx)(c.D5,{zoom:5,center:{lng:104.153576,lat:30.287459},gestureHandling:"greedy",disableDefaultUI:!0,mapId:"bf51a910020fa25a",children:t.maps&&t.maps.length>0&&t.maps.map((e,t)=>(0,s.jsx)(marker_with_inwindow,{initialPosition:{lat:e.LatitudeMeasure,lng:e.LongitudeMeasure},monitorID:e.MonitoringLocationIdentifier,Description:e.MonitoringLocationDescriptionText},t))})})})}},6540:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return SearchResult}});var s=r(7437),n=r(2402),i=r(7431);function SearchResult(){return(0,s.jsxs)(n.Z,{children:[(0,s.jsx)(n.Z.Item,{children:(0,s.jsxs)("div",{className:"search-item flex flex-wrap d-flex flex-row",children:[(0,s.jsx)("div",{className:"search-icon col-2",children:(0,s.jsx)(i.s8u,{})}),(0,s.jsxs)("div",{className:"search-content col-10",children:[(0,s.jsx)("h4",{children:"Chengdu City"}),(0,s.jsx)("p",{children:"pH: 1, COD:2"}),(0,s.jsxs)("p",{children:[(0,s.jsx)(i.XAC,{})," xx"]})]})]})}),(0,s.jsx)(n.Z.Item,{children:"Dapibus ac facilisis in"})]})}},8263:function(e,t,r){"use strict";r.d(t,{ZP:function(){return maps},iT:function(){return updateFetchMaps},w6:function(){return fetchMaps}});var s=r(2173);r(3198);let n="http://localhost:9000",i="MAPS_REQUEST",a="MAPS_SUCCESS",c="MAPS_FAILURE",requestMaps=()=>({type:i}),receiveMaps=e=>({type:a,maps:e}),mapsError=e=>({type:c,message:e});function maps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,maps:[],errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return{...e,isFetching:!0,maps:[],errorMessage:""};case a:return{...e,isFetching:!1,maps:t.maps,errorMessage:""};case c:return{...e,isFetching:!1,maps:[],errorMessage:t.message};default:return e}}let fetchMaps=()=>async(e,t)=>{let r=t().maps;if(r.maps.length>0)return r.maps;e(requestMaps());try{let r=await s.Z.get("".concat(n,"/site/all"));return await e(receiveMaps(r.data)),t().maps.maps}catch(t){throw e(mapsError(t.response.data.message)),t}},updateFetchMaps=()=>async(e,t)=>{e(requestMaps());try{let r=await s.Z.get("".concat(n,"/site/all"));return await e(receiveMaps(r.data)),t().maps.maps}catch(t){throw e(mapsError(t.response.data.message)),t}}},3903:function(e,t,r){"use strict";r.d(t,{Z:function(){return records},c:function(){return fetchRecords}});var s=r(2173);r(3198);let n="records_REQUEST",i="records_SUCCESS",a="records_FAILURE",requestRecords=()=>({type:n}),receiveRecords=e=>({type:i,records:e}),recordsError=e=>({type:a,message:e});function records(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,records:[],errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n:return{...e,isFetching:!0,records:[],errorMessage:""};case i:return{...e,isFetching:!1,records:t.records,errorMessage:""};case a:return{...e,isFetching:!1,records:[],errorMessage:t.message};default:return e}}let fetchRecords=()=>async(e,t)=>{let{isFetching:r,records:n}=t().records;if(r||n.length>0)return n;e(requestRecords());try{let t=await s.Z.get("".concat("http://localhost:9000","/record/all/latest/"));return e(receiveRecords(t.data)),t.data}catch(t){throw e(recordsError(t.response.data.message)),t}}},3865:function(){},1773:function(){}},function(e){e.O(0,[982,580,198,396,680,498,526,971,864,744],function(){return e(e.s=9330)}),_N_E=e.O()}]);