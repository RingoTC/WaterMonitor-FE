(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807],{7761:function(e,s,t){Promise.resolve().then(t.bind(t,2988))},2988:function(e,s,t){"use strict";t.r(s);var r=t(7437),n=t(2265),a=t(3198),i=t(7681),l=t(4033);t(9250),s.default=()=>{let[e,s]=(0,n.useState)(""),[t,o]=(0,n.useState)(""),c=(0,a.I0)(),u=(0,a.v9)(e=>e.auth.errorMessage),d=(0,a.v9)(e=>e.auth.user),h=(0,l.useRouter)();return(0,a.v9)(e=>e.auth.isAuthenticated),(0,n.useEffect)(()=>{d&&h.push("/tickets")},[d,h]),(0,n.useEffect)(()=>{d&&h.push("/profile")},[d]),(0,r.jsx)("div",{className:"home p-0",children:d?(0,r.jsx)("div",{}):(0,r.jsx)("div",{className:"container-fluid login-container-fluid",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6 ",children:(0,r.jsx)("img",{src:"images/login.png",className:"left-half",alt:"..."})}),(0,r.jsxs)("div",{className:"col-md-6 login-container",children:[(0,r.jsx)("h2",{className:"login-title",children:"Let's Log In!"}),(0,r.jsxs)("form",{onSubmit:s=>{s.preventDefault(),c((0,i.pH)(e,t))},children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{for:"exampleInputEmail1",className:"form-label",children:(0,r.jsx)("b",{children:"Username"})}),(0,r.jsx)("input",{className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",value:e,onChange:e=>s(e.target.value),type:"text",placeholder:"Enter your username"}),(0,r.jsx)("div",{id:"emailHelp",className:"form-text",children:"Username, Phone Number or Email"})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{for:"exampleInputPassword1",className:"form-label",children:(0,r.jsx)("b",{children:"Password"})}),(0,r.jsx)("input",{className:"form-control",id:"exampleInputPassword1",placeholder:"Enter your password",value:t,onChange:e=>o(e.target.value),type:"password"})]}),(0,r.jsx)("div",{class:"d-grid gap-2",children:(0,r.jsx)("button",{className:"btn btn-primary login-button",type:"submit",children:"Log in"})}),u&&(0,r.jsx)("div",{className:"alert alert-danger",children:u})]}),(0,r.jsxs)("div",{className:"login-signup",children:["Don't have an account?",(0,r.jsx)("a",{href:"/signup",children:" Sign Up"})]})]})]})})})}},7681:function(e,s,t){"use strict";t.d(s,{TX:function(){return logoutUser},ZP:function(){return auth},pH:function(){return loginUser}});var r=t(2173),n=t(2601);let a=n.env.NEXT_PUBLIC_BACKEND,i="LOGIN_REQUEST",l="LOGIN_SUCCESS",o="LOGIN_FAILURE",requestLogin=()=>({type:i}),receiveLogin=e=>({type:l,user:e}),loginError=e=>({type:o,message:e});function auth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isAuthenticated:!1,user:null,errorMessage:""},s=arguments.length>1?arguments[1]:void 0;switch(s.type){case i:return{...e,isFetching:!0,isAuthenticated:!1,user:null,errorMessage:""};case l:return{...e,isFetching:!1,isAuthenticated:!0,user:s.user,errorMessage:""};case o:return{...e,isFetching:!1,isAuthenticated:!1,user:null,errorMessage:s.message};case"LOGOUT_SUCCESS":return{...e,isAuthenticated:!1,user:null};default:return e}}let loginUser=(e,s)=>t=>(t(requestLogin()),r.Z.post("".concat(a,"/auth/login"),{username:e,password:s},{withCredentials:!0}).then(e=>{t(receiveLogin(e.data.user))}).catch(e=>{let s=e.response?e.response.data.message:e.message;t(loginError(s))})),logoutUser=()=>e=>r.Z.get("".concat(a,"/auth/logout"),{},{withCredentials:!0}).then(()=>{e({type:"LOGOUT_SUCCESS"})}).catch(e=>{console.error("Logout error:",e)})},9250:function(){},4033:function(e,s,t){e.exports=t(290)}},function(e){e.O(0,[126,198,971,864,744],function(){return e(e.s=7761)}),_N_E=e.O()}]);