(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{8661:function(e,t,r){Promise.resolve().then(r.bind(r,8006))},8006:function(e,t,r){"use strict";r.r(t);var n=r(7437),s=r(2265),u=r(3198),i=r(7681),o=r(4033);t.default=()=>{let e=(0,u.I0)(),t=(0,o.useRouter)();return(0,s.useEffect)(()=>{e((0,i.TX)()),t.push("/home")},[e,t]),(0,n.jsx)("div",{children:"Logging out..."})}},7681:function(e,t,r){"use strict";r.d(t,{TX:function(){return logoutUser},ZP:function(){return auth},pH:function(){return loginUser}});var n=r(2173),s=r(2601);let u=s.env.NEXT_PUBLIC_BACKEND,i="LOGIN_REQUEST",o="LOGIN_SUCCESS",c="LOGIN_FAILURE",requestLogin=()=>({type:i}),receiveLogin=e=>({type:o,user:e}),loginError=e=>({type:c,message:e});function auth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isAuthenticated:!1,user:null,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return{...e,isFetching:!0,isAuthenticated:!1,user:null,errorMessage:""};case o:return{...e,isFetching:!1,isAuthenticated:!0,user:t.user,errorMessage:""};case c:return{...e,isFetching:!1,isAuthenticated:!1,user:null,errorMessage:t.message};case"LOGOUT_SUCCESS":return{...e,isAuthenticated:!1,user:null};default:return e}}let loginUser=(e,t)=>r=>(r(requestLogin()),n.Z.post("".concat(u,"/auth/login"),{username:e,password:t},{withCredentials:!0}).then(e=>{r(receiveLogin(e.data.user))}).catch(e=>{let t=e.response?e.response.data.message:e.message;r(loginError(t))})),logoutUser=()=>e=>n.Z.get("".concat(u,"/auth/logout"),{},{withCredentials:!0}).then(()=>{e({type:"LOGOUT_SUCCESS"})}).catch(e=>{console.error("Logout error:",e)})},4033:function(e,t,r){e.exports=r(290)}},function(e){e.O(0,[126,198,971,864,744],function(){return e(e.s=8661)}),_N_E=e.O()}]);